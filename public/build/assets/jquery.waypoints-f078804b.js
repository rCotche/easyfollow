/*!
Waypoints - 4.0.1
Copyright Â© 2011-2016 Caleb Troughton
Licensed under the MIT license.
https://github.com/imakewebthings/waypoints/blob/master/licenses.txt
*/(function(){function e(a){if(!a)throw new Error("No options passed to Waypoint constructor");if(!a.element)throw new Error("No element option passed to Waypoint constructor");if(!a.handler)throw new Error("No handler option passed to Waypoint constructor");this.key="waypoint-"+r,this.options=e.Adapter.extend({},e.defaults,a),this.element=this.options.element,this.adapter=new e.Adapter(this.element),this.callback=a.handler,this.axis=this.options.horizontal?"horizontal":"vertical",this.enabled=this.options.enabled,this.triggerPoint=null,this.group=e.Group.findOrCreate({name:this.options.group,axis:this.axis}),this.context=e.Context.findOrCreateByElement(this.options.context),e.offsetAliases[this.options.offset]&&(this.options.offset=e.offsetAliases[this.options.offset]),this.group.add(this),this.context.add(this),s[this.key]=this,r+=1}var r=0,s={};e.prototype.queueTrigger=function(a){this.group.queueTrigger(this,a)},e.prototype.trigger=function(a){this.enabled&&this.callback&&this.callback.apply(this,a)},e.prototype.destroy=function(){this.context.remove(this),this.group.remove(this),delete s[this.key]},e.prototype.disable=function(){return this.enabled=!1,this},e.prototype.enable=function(){return this.context.refresh(),this.enabled=!0,this},e.prototype.next=function(){return this.group.next(this)},e.prototype.previous=function(){return this.group.previous(this)},e.invokeAll=function(a){var n=[];for(var i in s)n.push(s[i]);for(var t=0,o=n.length;o>t;t++)n[t][a]()},e.destroyAll=function(){e.invokeAll("destroy")},e.disableAll=function(){e.invokeAll("disable")},e.enableAll=function(){e.Context.refreshAll();for(var a in s)s[a].enabled=!0;return this},e.refreshAll=function(){e.Context.refreshAll()},e.viewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight},e.viewportWidth=function(){return document.documentElement.clientWidth},e.adapters=[],e.defaults={context:window,continuous:!0,enabled:!0,group:"default",horizontal:!1,offset:0},e.offsetAliases={"bottom-in-view":function(){return this.context.innerHeight()-this.adapter.outerHeight()},"right-in-view":function(){return this.context.innerWidth()-this.adapter.outerWidth()}},window.Waypoint=e})(),function(){function e(t){window.setTimeout(t,1e3/60)}function r(t){this.element=t,this.Adapter=n.Adapter,this.adapter=new this.Adapter(t),this.key="waypoint-context-"+s,this.didScroll=!1,this.didResize=!1,this.oldScroll={x:this.adapter.scrollLeft(),y:this.adapter.scrollTop()},this.waypoints={vertical:{},horizontal:{}},t.waypointContextKey=this.key,a[t.waypointContextKey]=this,s+=1,n.windowContext||(n.windowContext=!0,n.windowContext=new r(window)),this.createThrottledScrollHandler(),this.createThrottledResizeHandler()}var s=0,a={},n=window.Waypoint,i=window.onload;r.prototype.add=function(t){var o=t.options.horizontal?"horizontal":"vertical";this.waypoints[o][t.key]=t,this.refresh()},r.prototype.checkEmpty=function(){var t=this.Adapter.isEmptyObject(this.waypoints.horizontal),o=this.Adapter.isEmptyObject(this.waypoints.vertical),p=this.element==this.element.window;t&&o&&!p&&(this.adapter.off(".waypoints"),delete a[this.key])},r.prototype.createThrottledResizeHandler=function(){function t(){o.handleResize(),o.didResize=!1}var o=this;this.adapter.on("resize.waypoints",function(){o.didResize||(o.didResize=!0,n.requestAnimationFrame(t))})},r.prototype.createThrottledScrollHandler=function(){function t(){o.handleScroll(),o.didScroll=!1}var o=this;this.adapter.on("scroll.waypoints",function(){(!o.didScroll||n.isTouch)&&(o.didScroll=!0,n.requestAnimationFrame(t))})},r.prototype.handleResize=function(){n.Context.refreshAll()},r.prototype.handleScroll=function(){var t={},o={horizontal:{newScroll:this.adapter.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.adapter.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}};for(var p in o){var h=o[p],c=h.newScroll>h.oldScroll,u=c?h.forward:h.backward;for(var v in this.waypoints[p]){var d=this.waypoints[p][v];if(d.triggerPoint!==null){var w=h.oldScroll<d.triggerPoint,y=h.newScroll>=d.triggerPoint,g=w&&y,m=!w&&!y;(g||m)&&(d.queueTrigger(u),t[d.group.id]=d.group)}}}for(var l in t)t[l].flushTriggers();this.oldScroll={x:o.horizontal.newScroll,y:o.vertical.newScroll}},r.prototype.innerHeight=function(){return this.element==this.element.window?n.viewportHeight():this.adapter.innerHeight()},r.prototype.remove=function(t){delete this.waypoints[t.axis][t.key],this.checkEmpty()},r.prototype.innerWidth=function(){return this.element==this.element.window?n.viewportWidth():this.adapter.innerWidth()},r.prototype.destroy=function(){var t=[];for(var o in this.waypoints)for(var p in this.waypoints[o])t.push(this.waypoints[o][p]);for(var h=0,c=t.length;c>h;h++)t[h].destroy()},r.prototype.refresh=function(){var t,o=this.element==this.element.window,p=o?void 0:this.adapter.offset(),h={};this.handleScroll(),t={horizontal:{contextOffset:o?0:p.left,contextScroll:o?0:this.oldScroll.x,contextDimension:this.innerWidth(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:o?0:p.top,contextScroll:o?0:this.oldScroll.y,contextDimension:this.innerHeight(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}};for(var c in t){var u=t[c];for(var v in this.waypoints[c]){var d,w,y,g,m,l=this.waypoints[c][v],f=l.options.offset,A=l.triggerPoint,S=0,x=A==null;l.element!==l.element.window&&(S=l.adapter.offset()[u.offsetProp]),typeof f=="function"?f=f.apply(l):typeof f=="string"&&(f=parseFloat(f),l.options.offset.indexOf("%")>-1&&(f=Math.ceil(u.contextDimension*f/100))),d=u.contextScroll-u.contextOffset,l.triggerPoint=Math.floor(S+d-f),w=A<u.oldScroll,y=l.triggerPoint>=u.oldScroll,g=w&&y,m=!w&&!y,!x&&g?(l.queueTrigger(u.backward),h[l.group.id]=l.group):(!x&&m||x&&u.oldScroll>=l.triggerPoint)&&(l.queueTrigger(u.forward),h[l.group.id]=l.group)}}return n.requestAnimationFrame(function(){for(var b in h)h[b].flushTriggers()}),this},r.findOrCreateByElement=function(t){return r.findByElement(t)||new r(t)},r.refreshAll=function(){for(var t in a)a[t].refresh()},r.findByElement=function(t){return a[t.waypointContextKey]},window.onload=function(){i&&i(),r.refreshAll()},n.requestAnimationFrame=function(t){var o=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||e;o.call(window,t)},n.Context=r}(),function(){function e(i,t){return i.triggerPoint-t.triggerPoint}function r(i,t){return t.triggerPoint-i.triggerPoint}function s(i){this.name=i.name,this.axis=i.axis,this.id=this.name+"-"+this.axis,this.waypoints=[],this.clearTriggerQueues(),a[this.axis][this.name]=this}var a={vertical:{},horizontal:{}},n=window.Waypoint;s.prototype.add=function(i){this.waypoints.push(i)},s.prototype.clearTriggerQueues=function(){this.triggerQueues={up:[],down:[],left:[],right:[]}},s.prototype.flushTriggers=function(){for(var i in this.triggerQueues){var t=this.triggerQueues[i],o=i==="up"||i==="left";t.sort(o?r:e);for(var p=0,h=t.length;h>p;p+=1){var c=t[p];(c.options.continuous||p===t.length-1)&&c.trigger([i])}}this.clearTriggerQueues()},s.prototype.next=function(i){this.waypoints.sort(e);var t=n.Adapter.inArray(i,this.waypoints),o=t===this.waypoints.length-1;return o?null:this.waypoints[t+1]},s.prototype.previous=function(i){this.waypoints.sort(e);var t=n.Adapter.inArray(i,this.waypoints);return t?this.waypoints[t-1]:null},s.prototype.queueTrigger=function(i,t){this.triggerQueues[t].push(i)},s.prototype.remove=function(i){var t=n.Adapter.inArray(i,this.waypoints);t>-1&&this.waypoints.splice(t,1)},s.prototype.first=function(){return this.waypoints[0]},s.prototype.last=function(){return this.waypoints[this.waypoints.length-1]},s.findOrCreate=function(i){return a[i.axis][i.name]||new s(i)},n.Group=s}(),function(){function e(a){this.$element=r(a)}var r=window.jQuery,s=window.Waypoint;r.each(["innerHeight","innerWidth","off","offset","on","outerHeight","outerWidth","scrollLeft","scrollTop"],function(a,n){e.prototype[n]=function(){var i=Array.prototype.slice.call(arguments);return this.$element[n].apply(this.$element,i)}}),r.each(["extend","inArray","isEmptyObject"],function(a,n){e[n]=r[n]}),s.adapters.push({name:"jquery",Adapter:e}),s.Adapter=e}(),function(){function e(s){return function(){var a=[],n=arguments[0];return s.isFunction(arguments[0])&&(n=s.extend({},arguments[1]),n.handler=arguments[0]),this.each(function(){var i=s.extend({},n,{element:this});typeof i.context=="string"&&(i.context=s(this).closest(i.context)[0]),a.push(new r(i))}),a}}var r=window.Waypoint;window.jQuery&&(window.jQuery.fn.waypoint=e(window.jQuery)),window.Zepto&&(window.Zepto.fn.waypoint=e(window.Zepto))}();
